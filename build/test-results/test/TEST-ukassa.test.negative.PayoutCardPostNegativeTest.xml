<?xml version="1.0" encoding="UTF-8"?>
<testsuite name="ukassa.test.negative.PayoutCardPostNegativeTest" tests="4" skipped="0" failures="0" errors="0" timestamp="2024-04-04T15:23:38" hostname="user" time="7.018">
  <properties/>
  <testcase name="Проверка текста ошибки при отправке невалидного номера карты" classname="ukassa.test.negative.PayoutCardPostNegativeTest" time="1.026"/>
  <testcase name="Проверка невалидного номера карты" classname="ukassa.test.negative.PayoutCardPostNegativeTest" time="2.422"/>
  <testcase name="Проверка срока действия карты" classname="ukassa.test.negative.PayoutCardPostNegativeTest" time="3.167"/>
  <testcase name="Проверка ввода невалидного года Expiry_year" classname="ukassa.test.negative.PayoutCardPostNegativeTest" time="0.396"/>
  <system-out><![CDATA[Request URI:	https://api.yookassa.ru/v3/payments
Headers:		Idempotence-Key=4c443b8d-8591-435a-ac0f-bc65dd0e4dc8
				Authorization=Basic MzU5MjQwOnRlc3RfeGpoWUVnODU4akYwUjF6YVlRdGRrV1lPRHJtOUhxN1Q4cXlzaWFEWC1QOA==
				Accept=*/*
				Content-Type=application/json
Body:
{
    "amount": {
        "value": "150.00",
        "currency": "RUB"
    },
    "payment_method_data": {
        "type": "bank_card",
        "card": {
            "cardholder": "MR CARDHOLDER",
            "csc": "213",
            "expiry_month": "01",
            "expiry_year": "2020",
            "number": "32558"
        }
    },
    "confirmation": {
        "type": "redirect",
        "return_url": "https://www.example.com/return_url"
    },
    "description": "Заказ №74"
}
HTTP/1.1 400 
Server: nginx
Date: Thu, 04 Apr 2024 15:23:38 GMT
Content-Type: application/json;charset=UTF-8
Content-Length: 282
Connection: keep-alive
Keep-Alive: timeout=12
Signature: v1 2da0d9ba 1 MGQCMHDtdcynnEck78if/MQGhkhoif059k3CSM4qUoQSKLX6P4xqdZy8mqee0xVDlkVAZwIwU6mUIEcHinGIcUPDMDqQh+QGNV90H1HijvjGIiCNpLNSWfXjDayaFIOBWSjnq1TD

{
    "type": "error",
    "id": "b3484ab0-c71b-42d8-85b1-8a739039cf79",
    "code": "invalid_request",
    "description": "Error in the bank card number. Specify a valid number. You can validate the number using the Luhn algorithm.",
    "parameter": "payment_method_data.card.number"
}
Request URI:	https://api.yookassa.ru/v3/payments
Headers:		Idempotence-Key=8c37d8dc-65ab-495b-af11-74f4f8e2496a
				Authorization=Basic MzU5MjQwOnRlc3RfeGpoWUVnODU4akYwUjF6YVlRdGRrV1lPRHJtOUhxN1Q4cXlzaWFEWC1QOA==
				Accept=*/*
				Content-Type=application/json
Body:
{
    "amount": {
        "value": "150.00",
        "currency": "RUB"
    },
    "payment_method_data": {
        "type": "bank_card",
        "card": {
            "cardholder": "MR CARDHOLDER",
            "csc": "213",
            "expiry_month": "01",
            "expiry_year": "2020",
            "number": "5555555555554618"
        }
    },
    "confirmation": {
        "type": "redirect",
        "return_url": "https://www.example.com/return_url"
    },
    "description": "Заказ №74"
}
HTTP/1.1 200 
Server: nginx
Date: Thu, 04 Apr 2024 15:23:41 GMT
Content-Type: application/json;charset=UTF-8
Content-Length: 1119
Connection: keep-alive
Keep-Alive: timeout=12
Signature: v1 2da0d9bd 1 MGQCMDXIGlocemGmn8GtvpEAYLZjhRjzO/tRdBfx83sXXWberp8mSEtazTi+GeW4joun5QIwRn9wSHFaSeEQX13dxuummAp2CuZZQNBzPXYcGecnU8IaIlbOvLEvkiYGsfvLGbl3
Strict-Transport-Security: max-age=15768000

{
    "id": "2da0d9bb-000f-5000-9000-18abaaf5d091",
    "status": "canceled",
    "amount": {
        "value": "150.00",
        "currency": "RUB"
    },
    "description": "Заказ №74",
    "recipient": {
        "account_id": "359240",
        "gateway_id": "2215148"
    },
    "payment_method": {
        "type": "bank_card",
        "id": "2da0d9bb-000f-5000-9000-18abaaf5d091",
        "saved": false,
        "title": "Bank card *4618",
        "card": {
            "first6": "555555",
            "last4": "4618",
            "expiry_year": "2020",
            "expiry_month": "01",
            "card_type": "MasterCard",
            "card_product": {
                "code": "E"
            },
            "issuer_country": "US"
        }
    },
    "created_at": "2024-04-04T15:23:39.498Z",
    "test": true,
    "paid": false,
    "refundable": false,
    "metadata": {
        
    },
    "cancellation_details": {
        "party": "payment_network",
        "reason": "invalid_card_number"
    },
    "authorization_details": {
        "rrn": "288649985008753",
        "auth_code": "273329",
        "three_d_secure": {
            "applied": false,
            "method_completed": false,
            "challenge_completed": false
        }
    }
}
Request URI:	https://api.yookassa.ru/v3/payments
Headers:		Idempotence-Key=32c13ca4-4e6c-4797-bc59-8331a8f890fb
				Authorization=Basic MzU5MjQwOnRlc3RfeGpoWUVnODU4akYwUjF6YVlRdGRrV1lPRHJtOUhxN1Q4cXlzaWFEWC1QOA==
				Accept=*/*
				Content-Type=application/json
Body:
{
    "amount": {
        "value": "150.00",
        "currency": "RUB"
    },
    "payment_method_data": {
        "type": "bank_card",
        "card": {
            "cardholder": "MR CARDHOLDER",
            "csc": "213",
            "expiry_month": "01",
            "expiry_year": "2020",
            "number": "5555555555554543"
        }
    },
    "confirmation": {
        "type": "redirect",
        "return_url": "https://www.example.com/return_url"
    },
    "description": "Заказ №74"
}
HTTP/1.1 200 
Server: nginx
Date: Thu, 04 Apr 2024 15:23:43 GMT
Content-Type: application/json;charset=UTF-8
Content-Length: 1112
Connection: keep-alive
Keep-Alive: timeout=12
Signature: v1 2da0d9bf 1 MGQCMDrQoFGxluSUruRu+f1bctdYXLnNnPtY7CqKJyX3Y/IWsf7GhAYMqQOdcTsjtb41DgIwGg773oNY0x0ODFHUtsjkTfTKr1qCe/fD6Cgv1t7+mtKpoPRNMTwH/Ve7OcglrcjS
Strict-Transport-Security: max-age=15768000

{
    "id": "2da0d9bd-000f-5000-a000-1dd2fe412a8b",
    "status": "canceled",
    "amount": {
        "value": "150.00",
        "currency": "RUB"
    },
    "description": "Заказ №74",
    "recipient": {
        "account_id": "359240",
        "gateway_id": "2215148"
    },
    "payment_method": {
        "type": "bank_card",
        "id": "2da0d9bd-000f-5000-a000-1dd2fe412a8b",
        "saved": false,
        "title": "Bank card *4543",
        "card": {
            "first6": "555555",
            "last4": "4543",
            "expiry_year": "2020",
            "expiry_month": "01",
            "card_type": "MasterCard",
            "card_product": {
                "code": "E"
            },
            "issuer_country": "US"
        }
    },
    "created_at": "2024-04-04T15:23:41.829Z",
    "test": true,
    "paid": false,
    "refundable": false,
    "metadata": {
        
    },
    "cancellation_details": {
        "party": "payment_network",
        "reason": "card_expired"
    },
    "authorization_details": {
        "rrn": "632471402686902",
        "auth_code": "853628",
        "three_d_secure": {
            "applied": false,
            "method_completed": false,
            "challenge_completed": false
        }
    }
}
Request URI:	https://api.yookassa.ru/v3/payments
Headers:		Idempotence-Key=7ec7b321-6c93-4ff9-b3e7-dee0cf3534c3
				Authorization=Basic MzU5MjQwOnRlc3RfeGpoWUVnODU4akYwUjF6YVlRdGRrV1lPRHJtOUhxN1Q4cXlzaWFEWC1QOA==
				Accept=*/*
				Content-Type=application/json
Body:
{
    "amount": {
        "value": "150.00",
        "currency": "RUB"
    },
    "payment_method_data": {
        "type": "bank_card",
        "card": {
            "cardholder": "MR CARDHOLDER",
            "csc": "213",
            "expiry_month": "01",
            "expiry_year": "20",
            "number": "2202202212312379"
        }
    },
    "confirmation": {
        "type": "redirect",
        "return_url": "https://www.example.com/return_url"
    },
    "description": "Заказ №74"
}
HTTP/1.1 400 
Server: nginx
Date: Thu, 04 Apr 2024 15:23:45 GMT
Content-Type: application/json;charset=UTF-8
Content-Length: 232
Connection: keep-alive
Keep-Alive: timeout=12
Signature: v1 2da0d9c1 1 MGQCMGLZ6y0Z/6NZUPvKKR7/L6rz9ax/e9bc+RelQbSwiFGTVpZDZYMqX3LeEH2ZfzpJ1QIwe+DT/JIY6cecHWZFkvxWxIRsGgaU5SmrW7MkxwkxMf1J4woTw9tn2tD0JsJ2FyE2

{
    "type": "error",
    "id": "204f6a2a-dc3a-46d7-a8f4-06b6fafa7e81",
    "code": "invalid_request",
    "description": "Card expiry year is illegal. Must be a 4-digit number",
    "parameter": "payment_method_data.card.expiry_year"
}
]]></system-out>
  <system-err><![CDATA[]]></system-err>
</testsuite>
